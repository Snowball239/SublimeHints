О приёме снимков Земли с метеорологических спутников из песочницы

В настоящее время на Земной орбите находится порядка 10 спутников, используемых в метеорологических целях. Эти спутники непрерывно сканируют поверхность и атмосферу Земли и осуществляют непосредственный сброс информации на землю в соответствующие научные центры, лаборатории и всем кто может принять. Приемная станция, находящаяся в зоне радиовидимости спутника, в реальном времени видит то, что видит спутник. Данные с него поступают непосредственно в момент съемки. Аппаратно изображение принимается не только в видимом спектре, но и на некоторых частотах инфракрасного диапазона. Правильнее даже сказать, что все основные каналы – инфракрасные, их намного больше. Эти каналы намного важнее для практических целей, потому что в них можно выделить водяной пар, дым, тепловое излучение от лесных пожаров или определить температуру поверхности планеты. С помощью таких снимков можно определить даже созревание урожая на колхозных полях. Эта статья рассказывает о технике практического приема изображений со спутников дистанционного зондирования Земли, благодаря которой любой человек может зайти на такие сайты как meteosputnik.ru и увидеть те самые настоящие космические снимки.

По концепции «открытое небо» Всемирной Метеорологической Организации (WMO) метеорологическая информация распространяется бесплатно, и даже вы, находясь у себя на даче, можете принимать незашифрованный спутниковый сигнал в реальном времени, пока спутник пролетает над горизонтом. Сейчас постоянно вокруг Земли летают и передают изображение на частоте 137 МГц: спутники NOAA15, NOAA18, NOAA19, на частоте 1,7ГГц: NOAA15, NOAA16, NOAA18, NOAA19, MetopA, MetopB, FENGYUN, Meteor-M1, на частоте 8ГГц: Terra, Aqua, Aura и Calipso.

Форматы.

Прибор AVHRR (Advanced Very High Resolution Radiometer) на спутнике NOAA является сканером с разрешением 1 км/пиксель, он формирует изображение в 5 ИК-каналах. Российский МСУ-МР (Многоканальное Сканирующее Устройство Малого Разрешения) на спутнике Метеор-М1 формирует 6 каналов. На Terra и Aqua устройство MODIS (MODerate resolution Imaging Spectroradiometer) сканирует в 36 спектральных каналах с 12-битным разрешением в видимом, ближнем, среднем и тепловом инфракрасном диапазонах.

На частоте 137МГц в аналоговом формате (APT) передается картинка с разрешением 4км/пиксель, состоящая из двух ИК-каналов, полученная в результате геометрической коррекции перспективных искажений и уменьшения масштаба. На частоте 1,7ГГц уже используется цифровой формат HRPT (High Resolution Picture Transmission) (в NOAA – манчестерский код, а в Metop – код Рида-Соломона и алгоритм Витерби) – разрешение 1км/пиксель, на частоте 8ГГц тоже используется цифровой код для передачи данных с максимальным разрешением 250м/пиксель.

Поток данных в формате в общем случае состоит из строк, каждая из которых содержит:
• синхробайты
• данные о спутнике
• метку точного времени для каждой строки растрового изображения
• калибровочные значения
• нужную нам информацию о яркости пикселя в каждом канале
• последние форматы предусматривают передачу GPS-координат положения спутника на орбите.

Цифровой сигнал формируется 10-битными байтами (в MODIS 12 бит), т.е. по 10 бит на пиксель каждого канала. Строки идут одна за другой, в соответствии с направлением полета фото-сенсора, т.е., если спутник летит с севера на юг, то картинка строится сверху вниз, а если он возвращается к нам с Антарктиды, то прежде чем смотреть, картинку надо переворачивать. Сенсор устроен таким образом, что строки сканируются одна за другой, непрерывно. Он постоянно смотрит в центр Земли, а сканируемая строка перпендикулярна вектору движения, т.е. спутник производит съемку в надире. Проекция получается понятная глазу, но далеко не картографическая. Чтобы наложить карту городов и границ стран, приходится использовать редкие, никому неизвестные и ненужные в обычной жизни программы. Орбита, по которой летают метеоспутники, называется солнечно-синхронной. Запущенные по такой орбите объекты сохраняют свое положение относительно Земли и Солнца на каждом витке, т.е. если спутник пролетел над Москвой вечером, то на следующем витке он пролетит над Европой тоже вечером и вообще все время он попадает в вечер, а на обратной стороне Земли, значит, он всегда бывает утром, т.е. Земля фактически прокручивается под ним внутри его орбиты.

Приемная аппаратура.

Зная орбиту летающего в космосе радиопередатчика, надо вычислить его положение относительно приемной антенны. Для этого есть программа Орбитрон, под которую пишется драйвер поворотного устройства направленной антенны. Входными данными для программы являются: точное время (точность 1с) и кеплеры (кеплеровы элементы орбиты) в формате TLE – они доступны в Интернете и их надо периодически обновлять. На выходе получаются углы: элевация и азимут – насколько поднять тарелку и в какую сторону повернуть. Пока мы принимаем спутники L диапазона (1,7ГГц), углы корректируются раз в секунду и этого достаточно. Чтобы принимать эти спутники, нужна тарелка от 1,5 м диметром. Для облегчения веса можно применять сетчатую антенну. В фокусе параболы установлен облучатель с круговой поляризацией, фильтр и понижающий конвертор, преобразующий частоту 1,7 ГГц в частоту 150 МГц. С головки по коаксиальному кабелю радиосигнал приходит в приемник, а затем логически расшифровывается декодером, который выделяет 10-битные синхробайты, синхронизируется с потоком, и по USB данные попадают в программу, которая отслеживает наличие полезного сигнала и записывает его в файл на диск. Если кто-то хочет узнать подробности, то может почитать про PSK-модуляцию, манчестерский код, бинарное кодирование NRZ. В компьютере перед нами готовые структуры HRPT Minor Frame Format и т.п. На этом аппаратная часть заканчивается.


Видео 1. Прием данных со спутника NOAA.

Программная дообработка.

Получаемые с разных спутников данные должны быть пересобраны в какой-то единый формат, чтобы их могла открыть какая-то универсальная программа. Поэтому та программа (BMsat), что принимает цифру с декодера, переупаковывает данные на лету и пишет на диск в таком формате, чтобы их открыла программа HRPT Reader, которая может строить цветные картинки, накладывать карту и сохранять в BMP или JPEG! Это вторая в цепочке программа, которой тоже надо подкачивать из Интернета файлы орбит (TLE). Чтобы изображения, получаемые в инфракрасных спектрах, выглядели достаточно адекватно для слепого в этом диапазоне RGB-зрителя, т.е. для вас, есть специальный алгоритм, названный в программе False color. Таким образом, вам должно быть понятно, что те метеорологические изображения, которые есть в Интернете, имеют не настоящие цвета, а смоделированные на основе полосок ИК-спектра. Вообще, основой для алгоритма False color могут служить разные каналы – здесь выбор за оператором. В функционал программы еще входит возможность выпрямления перспективных искажений. Те пиксели, которые отсканировались с поверхности Земли прямо из под спутника отображают 1км, а те пиксели, которые расположены ближе к горизонту охватывают по несколько километров, и чтобы Земля казалась не круглой, а плоской, как на картах, можно вытягивать края картинки в ширину. При этом качество изображения страдает, размер JPG-файла растет, на экране помещается еще меньший фрагмент. Но так или иначе дальше, все отправляется по FTP на сайт, а про это вы уже сами все хорошо знаете. Разве что можно упомянуть разбиение большого снимка на тайлы (маленькие квадратики), которые бы закачивались для тех мест, на которые смотрит пользователь сайта. Как это делается в яндекс- и гугл-картах.

Оборудование и программы, которые используются для приема, начиная двухосевыми поворотками, заканчивая HRPT Reader’ом очень специфичны и в магазинах на полках не лежат. Все это надо разрабатывать своими силами, используя свой опыт и опыт тех, кто этим уже занимается, либо платить за разработку специалистам. Вообще всякое оборудование, конечно, уже существует, но цены на него космические. Благодаря ebay, можно попробовать купить списанный экземпляр того или другого устройства на свой страх и риск, попробовать починить его и доработать. Чтобы было возможно принимать 8ГГц спутники с разрешением 250м/пиксель необходимо увеличить:

• точность позиционирования параболической антенны до 10’ (10 угловых минут)
• частоту позиционирования – тарелка должна двигаться плавно
• диаметр до 3м

Кроме этого надо полностью заменить аппаратную часть. Перейти на другие частоты и т.д. Снимки, генерируемые такими спутниками формируются уже не построчно, а полосками ощутимой ширины, в связи с этим нормально смотреть на них не возможно, т.к. перспективные искажения дублируют кусочки изображений, близких к горизонту. Т.е. тут тоже есть математическая задача, которую надо будет решать.

Для расширения функционала проекта «Фото со спутника в реальном времени» (он представлен на сайте www.meteosputnik.ru) необходимо решать разные задачи, например, преобразование проекции в Меркатор, слияние наших сервисов с другими, например, подключение к бесплатной программе-карте SAS.Planet, установки нового оборудования и открытия новых приемных станций для увеличения количества и качества снимков. Для ускорения этого и всего другого было бы неплохо расширить группу энтузиастов, готовых бесплатно поучаствовать в проекте и найти спонсоров.

В настоящее время наш проект предоставляет открытый доступ ко многим уникальным и полезным данным. Смысл его очень многогранен. Спрогнозировать облачность и изменение погоды иногда гораздо проще и интереснее смотря на метеоснимки, чем на прогнозы разных метеосайтов. Еще можно понимать попадаешь ли ты в центр циклона, на грозовой фронт или погода будет меняться плавно в течении нескольких дней. В частности, один мой знакомый использовал эти снимки три года назад, когда всё было в дыму от лесных пожаров, чтобы принять решение, куда уехать из Московской области на выходные: на снимках было видно, что прозрачный воздух начинался тогда аж в Белоруссии. Но это пример краткосрочного применения технологии. Полученные нами данные используются в обучении студентов метеорологических факультетов. Очень важно понимать, что эти данные представляют собой не просто оперативные данные, а уникальную область технологий. Такие вещи могут заинтересовать школьников и стимулировать их к обучению сразу по нескольким предметам, кроме физики сюда подключаются знания о природе, атмосферных, водных процессах, метеорологии, географии, астрономии, геометрии, информатике и радиоэлектронике. Можете попробовать проверить свои знания о географии, мысленно представив текущее состояние пересохшего Аральского моря и сравнив со снимком из космоса. Вы чувствуете разницу между теоретическим знанием и практическим, разве было бы возможно просто взять и посмотреть на Аральское море, довольствуясь редкими распечатками из учебников, которых нет и старинными картами? Или вспомните трагедию в Крымске – городе, где в свое время с участием Д.И. Менделеева была открыта первая нефтедобывающая установка. Сейчас же при таком уровне технического развития не нашлось ни одного человека в той местности, чтобы создать ситуацию, в которой люди были бы хотя бы предупреждены о приближающейся катастрофе. Т.е. вопросами выживания почему-то никто не занимается, даже не кто-то там, кто должен, а вообще никто, наверно тысячу лет назад была такая же ситуация. Никто не знает, как резко сможет взлететь наука о Земле, если в такие знания будут окунаться не только штучные доктора наук, но хотя бы 1% школьников. Хотели бы вы, чтобы у вас в ваше время в школе был компьютер, спутниковый приемный комплекс? Наверное, и сейчас половина из вас мечтают, если не о телескопе, то о связи со спутниками, приеме какой-нибудь совершенно новой для разума информации. При самом скромном желании можно внедрить технологии в образование. Но мы то с вами знаем, что вообще в настоящее время в образование внедряют.

Непосредственная польза человечеству от снимков, кроме колоссальной научной, очень разносторонняя:
• на фотографиях видны различные пожары, их очаги, направление распространения, эта информация формируется в соответствующих противопожарных службах сразу же, как только пролетел спутник
• в сельской местности на просторах нашей Родины по цветовой информации полей можно определить степень созревания сельскохозяйственных культур, отслеживать сбор урожая и количество снега зимой
• также осуществляется мониторинг паводков и ледовой обстановки, так пару лет назад можно было наблюдать замерзшее Азовское море и ледоход. А в Белом море знание ледовой обстановки жизненно необходимо для судоходства
• в мире происходит бесчисленное множество природных явлений, кроме самого наблюдения за ними, можно оценить степень и масштаб их влияния

Век компьютеризации пока что шагает по планете в виде экономики продаж бытовой техники и электронных игрушек со стеклом, до которого можно дотронуться пальцем. Если взглянуть на это со стороны, то даже может стать немножко стыдно, как человечество, получив такие совершенные технологии, их использует. С другой стороны, в масштабах государственных служб, существуют глобальные проекты, но на примере нашей космической отрасли тоже становится немножко стыдно, когда видишь, что построенные за народные деньги ракеты и летающие на них спутники, собирающие информацию принадлежат как бы не нам, а узкому замкнутому кругу лиц, в который попасть почти нереально по комплексу причин. Простому смертному россиянину увидеть нормальный космоснимок можно только благодаря иностранным сайтам тех стран, где хоть какое-то участие в образовательных процессах этому предусматривается, а в реальном времени снимок можно увидеть только у нас. Ситуация такова, что в то время как польза любому человеку от своевременно полученной метео-инфромации может быть сопоставима с пользой от яндекс-пробок, те госслужбы, которые занимаются непосредственно приемом изображений, считают выкладывание снимков в открытый доступ нецелесообразным. Т.е. они существуют, строят ракеты и спутники за наш счет, а потом нам же предлагают покупать у них наши же снимки.

Сейчас у всех нас есть возможность конструктивно работать в параллель государству. Нужно открывать новые приемные станции, разрабатывать, изготавливать и устанавливать новое оборудование, писать новые программы для расширения охвата земной поверхности. На днях мы договорились о сотрудничестве с энтузиастом из Японии, у которого тоже есть собственная приемная станция, теперь мы получаем его исходные данные, обрабатываем их и публикуем снимки от Байкала до Камчатки. Среди пользователей нашего сайта появилось много жителей Дальнего Востока. Таким образом, покрытие фото-данных расширилось от Лиссабона до Владивостока и даже дальше. Сейчас абсолютно всё: изготовление оборудования, эксплуатация, обслуживание помещения приемной станции, работа оператора никем и ничем не финансируется – все делается за свой счет. Мы делаем это бесплатно и открыто. Для поддержания и устойчивого развития проекта нужны заинтересованные люди и финансирование.

У нас есть снимки туч на Черном море и Кавказе тех дней, когда в Крымске погибли тысячи людей. Если бы хотя бы 10 человек в стране искренне интересовались подобными явлениями, начиная со школы или с сознательного возраста, вполне возможно, что опасные явления (ОЯ) предсказывались бы не просто как «ОЯ», а «уровень затопления местами составит более 2 метров». Кстати метеослужбы по самым пессимистичным прогнозам давали до 100мм осадков ту ночь, а реально было под 300мм. Вот вам и эффективность подхода сокрытия метеоданных, пусть и не физического, но идеологического. 